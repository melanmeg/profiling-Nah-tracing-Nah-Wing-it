apiVersion: kubeadm.k8s.io/v1beta3
kind: JoinConfiguration
discovery:
  bootstrapToken:
    apiServerEndpoint: {{ KUBE_API_SERVER_VIP }}:8443
    token: {{ KUBEADM_BOOTSTRAP_TOKEN }}
    unsafeSkipCAVerification: true
  tlsBootstrapToken: {{ KUBEADM_BOOTSTRAP_TOKEN }}
controlPlane:
  certificateKey: {{ KUBEADM_UPLOADED_CERTS }}
  localAPIEndpoint:
    advertiseAddress: {{ NODE_IP_2 }}
    bindPort: 6443
nodeRegistration:
  criSocket: unix://{{ CRI_SOCKET_PATH }}
  imagePullPolicy: IfNotPresent
  taints:
  - effect: NoSchedule
    key: node-role.kubernetes.io/control-plane
